<!DOCTYPE html>
<html lang="en">
<head>
	<script src="https://cdn.jsdelivr.net/npm/aws-sdk@2.1466.0/dist/aws-sdk.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link rel="icon" href="icon.png" type="image/png">
  <meta charset="UTF-8">
  <title>AWS AI Playground</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Raleway:wght@600&family=Poppins:wght@500&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "Roboto", sans-serif;
      background: linear-gradient(135deg, #f9f9f9, #e6ebf0);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    /* Title */
    h1 {
      margin: 50px 0 30px;
      font-size: 3rem;
      font-family: "Raleway", sans-serif;
      color: #2c3e50;
      text-align: center;
      font-weight: 700;
      position: relative;
    }

    h1::after {
      content: "";
      display: block;
      width: 80px;
      height: 4px;
      background: #3498db;
      margin: 15px auto 0;
      border-radius: 2px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 25px;
      max-width: 1100px;
      width: 90%;
    }

    .card {
      padding: 30px 20px;
      border-radius: 18px;
      text-align: center;
      color: #fff;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
      font-family: "Poppins", sans-serif;
      min-height: 200px;
    }

    .card h2 {
      font-size: 1.8rem;
      margin-bottom: 12px;
      font-family: "Merriweather", serif;
    }

    .card p {
      font-size: 1rem;
      line-height: 1.5;
      opacity: 0.95;
    }

    .card:hover {
      transform: translateY(-10px);
      box-shadow: 0 12px 28px rgba(0,0,0,0.2);
    }

    /* Colors */
    .rekognition { background: #6C63FF; }
    .polly { background: #FF6584; }
    .translate { background: #00BFA6; }
    .comprehend { background: #FFA500; }
    .textract { background: #FF6F61; }
    .lex { background: #3498DB; }

    .rekognition:hover { background: #7a73ff; }
    .polly:hover { background: #ff7894; }
    .translate:hover { background: #1cd3b9; }
    .comprehend:hover { background: #ffb733; }
    .textract:hover { background: #ff7f71; }
    .lex:hover { background: #4aa3e0; }

    /* Modal */
    .modal {
      position: fixed;
      top: 0;
      right: -100%;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.55);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: right 0.5s ease;
    }

    .modal.active {
      right: 0;
    }

    .modal-content {
      background: #fff;
      padding: 30px;
      border-radius: 20px;
      width: 440px;
      max-width: 95%;
      text-align: center;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      animation: zoomIn 0.4s ease;
    }

    @keyframes zoomIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    @keyframes zoomOut {
      from { transform: scale(1); opacity: 1; }
      to { transform: scale(0.8); opacity: 0; }
    }

    .modal-content.closing {
      animation: zoomOut 0.4s ease forwards;
    }

    .close-btn {
      position: absolute;
      top: 12px;
      right: 18px;
      font-size: 32px;
      cursor: pointer;
      color: #333;
      font-weight: bold;
      transition: 0.3s;
    }

    .close-btn:hover {
      color: #e74c3c;
      transform: rotate(90deg);
    }

    /* Form styles */
    .service-form {
      margin-top: 20px;
      text-align: left;
    }

    .service-form label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #2c3e50;
    }

    .service-form input, .service-form textarea, .service-form select, .service-form button {
      width: 100%;
      padding: 12px 14px;
      margin-bottom: 15px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 1rem;
      font-family: "Roboto", sans-serif;
    }

    .service-form button {
      background: linear-gradient(135deg, #3498db, #2ecc71);
      color: white;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: transform 0.3s, opacity 0.3s;
    }

    .service-form button:hover {
      transform: translateY(-3px);
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <!-- Title -->
  <h1>AWS AI Playground</h1>

  <div class="grid">
    <div class="card rekognition" onclick="openModal('Rekognition')">
      <h2>Rekognition</h2>
      <p>Analyze images and videos for objects, people, text, scenes, and activities.</p>
    </div>
    <div class="card polly" onclick="openModal('Polly')">
      <h2>Polly</h2>
      <p>Turn text into lifelike speech using deep learning models.</p>
    </div>
    <div class="card translate" onclick="openModal('Translate')">
      <h2>Translate</h2>
      <p>Translate text between multiple languages instantly and accurately.</p>
    </div>
    <div class="card comprehend" onclick="openModal('Comprehend')">
      <h2>Comprehend</h2>
      <p>Extract insights like sentiment, key phrases, and entities from text.</p>
    </div>
    <div class="card textract" onclick="openModal('Textract')">
      <h2>Textract</h2>
      <p>Automatically extract text, tables, and forms from scanned documents.</p>
    </div>
    <div class="card lex" onclick="openModal('Lex')">
      <h2>Lex</h2>
      <p>Build conversational chatbots and integrate them into your apps.</p>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content" id="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <h2 id="modal-title"></h2>
      <div id="modal-body"></div>
    </div>
  </div>

  <script>
    const API_URL = "https://tuz9qxci0a.execute-api.us-east-1.amazonaws.com/dev/translate"; //  API Gateway

    function openModal(service) {
      document.getElementById('modal').classList.add('active');
      document.getElementById('modal-content').classList.remove('closing');
      document.getElementById('modal-title').textContent = service;

      const modalBody = document.getElementById('modal-body');
      modalBody.innerHTML = "";

      if (service === "Rekognition") {
  modalBody.innerHTML = `
    <form class="service-form">
      <label>Upload Image:</label>
      <input type="file" id="rekog-file" accept="image/*" />
      <br>
      <img id="rekog-preview" src="" style="max-width:100%;margin:10px 0;border:2px solid #ccc;border-radius:10px;display:none;" />
      <button type="button" onclick="callRekognition()">Analyze</button>
    </form>

    <div class="container" style="margin-top:15px;">
      <table id="rekog-results" style="display:none;width:100%;border-collapse:collapse;">
        <thead>
          <tr style="background:#3498db;color:#fff;">
            <th>Label</th>
            <th>Confidence (%)</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <button id="rekog-pdf" style="margin-top:15px;display:none;" onclick="downloadRekogPDF()">Download PDF</button>
  `;

  // preview image
  document.getElementById("rekog-file").addEventListener("change", (event) => {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onloadend = function () {
        window.base64Image = reader.result.split(",")[1];
        const img = document.getElementById("rekog-preview");
        img.src = reader.result;
        img.style.display = "block";
      };
      reader.readAsDataURL(file);
    }
  });
}
 else if (service === "Polly") {
  modalBody.innerHTML = `
    <form class="service-form">
      <label>Enter Text:</label>
      <textarea id="polly-text" rows="4" placeholder="Type something..."></textarea>
      <button type="button" onclick="callPolly()">Convert to Speech</button>
    </form>
    <div style="margin-top:15px; text-align:center;">
      <audio id="audioPlayer" controls style="width:100%; display:none;"></audio>
      <br>
      <a id="downloadLink" download="polly.mp3" style="display:none;">‚¨áÔ∏è Download Audio</a>
    </div>
  `;
}
 else if (service === "Translate") {
        modalBody.innerHTML = `
          <form class="service-form">
            <label>Enter Text to Translate:</label>
            <textarea id="translate-text" rows="4"></textarea>

            <label>Select Source Language:</label>
            <select id="source-lang">
              <option value="en">English</option>
              <option value="ar">Arabic</option>
              <option value="fr">French</option>
              <option value="de">German</option>
              <option value="zh">Chinese</option>
            </select>

            <label>Select Target Language:</label>
            <select id="target-lang">
              <option value="en">English</option>
              <option value="ar">Arabic</option>
              <option value="fr">French</option>
              <option value="de">German</option>
              <option value="zh">Chinese</option>
            </select>

            <button type="button" onclick="callTranslate()">Translate</button>
          </form>
          <div id="translate-result" style="margin-top:15px; font-weight:bold; color:#2c3e50;"></div>
        `;
      } 
	  
	  
	  
//  Comprehend
else if (service === "Comprehend") {
    modalBody.innerHTML = `
      <form class="service-form">
        <label>Enter Text:</label>
        <textarea id="comprehend-text" rows="4" placeholder="Type your text here..."></textarea>
        <button type="button" id="analyze-comprehend">Analyze Sentiment</button>
      </form>

      <div id="comprehend-result" style="margin-top:15px;">
        <h3>Sentiment:</h3>
        <div id="comprehend-sentiment" class="sentiment" style="color:#fff;padding:10px;border-radius:8px;font-size:18px;text-align:center;"></div>
      </div>
    `;

    document.getElementById("analyze-comprehend").addEventListener("click", async () => {
        const text = document.getElementById("comprehend-text").value.trim();
        if (!text) return alert("‚ö†Ô∏è Please enter some text!");

        const sentimentDiv = document.getElementById("comprehend-sentiment");

        sentimentDiv.textContent = "Analyzing...";

        try {
            const response = await fetch("https://e84fvouow5.execute-api.us-east-1.amazonaws.com/test/comprehend", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ text })
            });
            const data = await response.json();

            const sentiment = data.sentiment.Sentiment;
            const score = data.sentiment.SentimentScore[sentiment.charAt(0) + sentiment.slice(1).toLowerCase()] || 0;

            
            let emoji = "";
            if (sentiment === "POSITIVE") emoji = "üôÇ";
            else if (sentiment === "NEGATIVE") emoji = "üòû";
            else emoji = "üòê";

            sentimentDiv.textContent = `${sentiment.charAt(0) + sentiment.slice(1).toLowerCase()} ${emoji} (${(score*100).toFixed(2)}%)`;

            
            sentimentDiv.style.backgroundColor = sentiment === "POSITIVE" ? "#4CAF50" :
                                                 sentiment === "NEGATIVE" ? "#F44336" : "#9E9E9E";

        } catch(err) {
            sentimentDiv.textContent = "Error calling API: " + err.message;
            sentimentDiv.style.backgroundColor = "#9E9E9E";
        }
    });


		
		
	} else if (service === "Textract") {
    modalBody.innerHTML = `
      <form class="service-form" id="textract-form">
        <label>Upload Document:</label>
        <input type="file" id="textract-file" accept=".pdf,.jpg,.png" required />
        <br><br>
        <img id="textract-preview" src="" style="max-width:100%; margin-bottom:10px; display:none; border:2px solid #ccc; border-radius:10px;" />
        <button type="button" id="extract-btn">Extract Text</button>
      </form>
      <h3>Extracted Text:</h3>
      <pre id="textract-output" style="white-space: pre-wrap; background:#f4f4f4; padding:10px; border-radius:10px;"></pre>
    `;

   
    document.getElementById("textract-file").addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onloadend = function () {
                window.textractBase64 = reader.result.split(",")[1];

                
                const preview = document.getElementById("textract-preview");
                preview.src = reader.result;
                preview.style.display = "block";
            };
            reader.readAsDataURL(file);
        }
    });

    document.getElementById("extract-btn").addEventListener("click", async () => {
        if (!window.textractBase64) {
            alert("‚ö†Ô∏è Please upload a document first!");
            return;
        }

        const output = document.getElementById("textract-output");
        output.textContent = "‚è≥ Extracting text...";

        try {
            const response = await fetch("https://76sacn565f.execute-api.us-east-1.amazonaws.com/test/textract", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ image: window.textractBase64 })
            });

            const data = await response.json();

            if (response.ok) {
                output.textContent = data.text.join("\n");
            } else {
                output.textContent = `Error: ${JSON.stringify(data)}`;
            }
        } catch (err) {
            output.textContent = `Error calling API: ${err.message}`;
        }
    });



		
      } 
	  
	  
	  
	  //lex  
	  
else if(service === "Lex") {
    modalBody.innerHTML = `
      <h2 style="text-align:center; font-family: 'Poppins', sans-serif; color:#fff; background: linear-gradient(90deg, #667eea, #764ba2); padding:12px 0; border-radius:12px;">LexMan</h2>
      <div id="lex-chat" style="height:450px; overflow-y:auto; padding:15px; border-radius:15px; background: #f0f4f8; border: 1px solid #ccc;"></div>
      <input type="text" id="lex-input" placeholder="Type your message..." style="width:100%; padding:14px 20px; border-radius:25px; border:1px solid #ccc; margin-top:12px; font-size:16px;">
    `;

    const chatDiv = document.getElementById('lex-chat');
    const inputField = document.getElementById('lex-input');

    AWS.config.update({
        region: 'us-east-1',
        accessKeyId: '',
        secretAccessKey: ''
    });

    const lexruntime = new AWS.LexRuntimeV2();
    const botId = 'XB0XTOZHFC';
    const botAliasId = 'L2RTIVMYBT';
    const localeId = 'en_US';
    const sessionId = 'user1';

    function addLexMessage(text, sender) {
        const msg = document.createElement('div');
        msg.textContent = text;
        msg.style.maxWidth = "80%";
        msg.style.margin = "8px 0";
        msg.style.padding = "12px 18px";
        msg.style.borderRadius = "20px";
        msg.style.wordWrap = "break-word";
        msg.style.fontSize = "15px";
        msg.style.boxShadow = "0 2px 6px rgba(0,0,0,0.1)";

        if(sender === 'user') {
            msg.style.background = "#c1e1ff";
            msg.style.color = "#0a3d62";
            msg.style.marginLeft = "auto";
            msg.style.textAlign = "right";
        } else {
            msg.style.background = "#ffffff";
            msg.style.color = "#1a1a1a";
            msg.style.marginRight = "auto";
            msg.style.textAlign = "left";
        }

        chatDiv.appendChild(msg);
        chatDiv.scrollTop = chatDiv.scrollHeight;
    }

    async function sendLexMessage(text) {
        addLexMessage(text, 'user');

        lexruntime.recognizeText({
            botId,
            botAliasId,
            localeId,
            sessionId,
            text
        }, (err, data) => {
            if(err) {
                addLexMessage('Error: '+err.message, 'bot');
            } else {
                const messages = data.messages || [];
                messages.forEach(m => addLexMessage(m.content, 'bot'));
            }
        });
    }

    inputField.addEventListener('keydown', (e) => {
        if(e.key === 'Enter') {
            e.preventDefault();
            const text = inputField.value.trim();
            if(text) {
                sendLexMessage(text);
                inputField.value = '';
            }
        }
    });
}



}


    async function callTranslate() {
      const text = document.getElementById("translate-text").value;
      const sourceLang = document.getElementById("source-lang").value;
      const targetLang = document.getElementById("target-lang").value;
      const resultDiv = document.getElementById("translate-result");

      if (!text.trim()) {
        resultDiv.textContent = "‚ö†Ô∏è Please enter some text.";
        return;
      }

      resultDiv.textContent = "‚è≥ Translating...";

      try {
        const response = await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ text, source: sourceLang, target: targetLang })
        });

        const data = await response.json();
        resultDiv.textContent =  data.translatedText;
      } catch (err) {
        console.error(err);
        resultDiv.textContent = " Error calling API.";
      }
    }

    function closeModal() {
      const modalContent = document.getElementById('modal-content');
      modalContent.classList.add('closing');
      setTimeout(() => {
        document.getElementById('modal').classList.remove('active');
      }, 400);
    }
	
	
	//polly 
  const POLLY_URL = "https://1gjsenrrg3.execute-api.us-east-1.amazonaws.com/test/polly"; 

  async function callPolly() {
    const text = document.getElementById("polly-text").value;
    const player = document.getElementById("audioPlayer");
    const downloadLink = document.getElementById("downloadLink");

    if (!text.trim()) {
      alert("‚ö†Ô∏è Please enter text first!");
      return;
    }

    try {
      const response = await fetch(POLLY_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text })
      });

      if (!response.ok) throw new Error("Polly API call failed");

      const audioBuffer = await response.arrayBuffer();
      const audioBlob = new Blob([audioBuffer], { type: "audio/mpeg" });
      const audioUrl = URL.createObjectURL(audioBlob);

      
      player.src = audioUrl;
      player.style.display = "block";
      player.play();

   
      downloadLink.href = audioUrl;
      downloadLink.style.display = "inline-block";

    } catch (err) {
      console.error(err);
      alert("‚ùå Error: " + err.message);
    }
  }


	//rekognation
  const REKOG_URL = "https://qvixg3rtce.execute-api.us-east-1.amazonaws.com/test/rekognation";
  let rekogResults = [];

  async function callRekognition() {
    if (!window.base64Image) {
      alert("‚ö†Ô∏è Please upload an image first!");
      return;
    }

    try {
      const response = await fetch(REKOG_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ image: window.base64Image })
      });

      const data = await response.json();
      rekogResults = data;

      const table = document.getElementById("rekog-results");
      const tbody = table.querySelector("tbody");
      tbody.innerHTML = "";

      if (Array.isArray(data)) {
        data.forEach(item => {
          const row = `<tr>
              <td style="border:1px solid #ddd;padding:8px;">${item.Name}</td>
              <td style="border:1px solid #ddd;padding:8px;">${item.Confidence.toFixed(2)}%</td>
            </tr>`;
          tbody.innerHTML += row;
        });
        table.style.display = "table";
        document.getElementById("rekog-pdf").style.display = "inline-block";
      }
    } catch (err) {
      console.error(err);
      alert("‚ùå Rekognition API call failed.");
    }
  }

  function downloadRekogPDF() {
    if (!rekogResults.length) {
      alert("‚ö†Ô∏è No analysis results!");
      return;
    }

    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    doc.setFontSize(16);
    doc.text("AWS Rekognition Analysis Report", 20, 20);

    doc.setFontSize(12);
    let y = 40;
    rekogResults.forEach(item => {
      doc.text(`- ${item.Name}: ${item.Confidence.toFixed(2)}%`, 20, y);
      y += 8;
    });

    doc.save("rekognition_report.pdf");
  }
	
	
  </script>
</body>
</html>
